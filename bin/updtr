#!/usr/bin/env node

var program = require("commander");
var updtr = require("../lib");
var pkg = require("../package.json");
var reporters = Object.keys(updtr.reporters);

program
  .version(pkg.version)
  .description("Update outdated npm modules with zero painâ„¢")
  .option("-R, --reporter <reporter>", "choose reporter: " + reporters.join(", "), "default");

program.parse(process.argv);

if (!(new RegExp(reporters.join("|")).test(program.reporter))) {
    console.log(program.reporter + " is not a reporter.");
    console.log("Available reporters: " + reporters.join(", "));
    process.exit(0);
}

updtr.run({
    cwd: process.cwd(),
    reporter: updtr.reporters[program.reporter]
}, function (err) {
    if (err) {
        throw err;
    }
});
